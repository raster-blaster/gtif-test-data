{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "description": "PM2.5 timeseries for selected station",
  "data": {
    "values": []
  },
  "title": {
    "text": {
      "expr": "length(data('source_0')) > 0 ? data('source_0')[0].station_name : 'Station PM2.5 Timeseries'"
    },
    "anchor": "start"
  },
  "mark": {
    "type": "line",
    "point": true
  },
  "encoding": {
    "x": {
      "field": "date",
      "type": "temporal",
      "title": "Date"
    },
    "y": {
      "field": "pm25",
      "type": "quantitative",
      "title": "PM2.5 (ug/m3)"
    },
    "tooltip": [
      {
        "field": "station_name",
        "type": "nominal",
        "title": "Station"
      },
      {
        "field": "station_code",
        "type": "nominal",
        "title": "Code"
      },
      {
        "field": "date",
        "type": "temporal",
        "title": "Date"
      },
      {
        "field": "pm25",
        "type": "quantitative",
        "title": "PM2.5"
      }
    ]
  }
}
